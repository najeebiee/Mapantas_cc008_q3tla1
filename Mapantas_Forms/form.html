<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <form id="registrationForm" novalidate>
        <div class="form-container">
            <div class="form-column">
                <fieldset>
                    <legend>Personal Information</legend>

                    <div class="form-group">
                        <label for="fname">First Name</label>
                        <input type="text" name="fname" id="fname" required>
                    </div>

                    <div class="form-group">
                        <label for="mname">Middle Name</label>
                        <input type="text" name="mname" id="mname">
                    </div>

                    <div class="form-group">
                        <label for="lname">Last Name</label>
                        <input type="text" name="lname" id="lname" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="photo">Photo</label>
                        <input type="file" name="photo" id="photo" accept="image/*">
                    </div>

                    <div class="form-group">
                        <label for="birthdate">Date of Birth</label>
                        <input type="date" name="birthdate" id="birthdate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthloc">Place of Birth</label>
                        <input type="text" name="birthloc" id="birthloc">
                    </div>

                    <div class="form-group">
                        <label>Gender</label>
                        <div class="radio-group">
                            <input type="radio" name="gender" id="male" value="Male"><label for="male">Male</label>
                            <input type="radio" name="gender" id="female" value="Female"><label for="female">Female</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Civil Status</label>
                         <div class="radio-group">
                            <input type="radio" name="civilstat" id="single" value="Single"><label for="single">Single</label>
                            <input type="radio" name="civilstat" id="married" value="Married"><label for="married">Married</label>
                            <input type="radio" name="civilstat" id="widowed" value="Widowed"><label for="widowed">Widowed</label>
                        </div>
                    </div>

                     <div class="form-group">
                        <label for="nationality">Nationality</label>
                        <input type="text" name="nationality" id="nationality">
                    </div>

                     <div class="form-group">
                        <label for="religion">Religion</label>
                        <input type="text" name="religion" id="religion">
                    </div>
                </fieldset>
            </div>

            <div class="form-column">
                <fieldset>
                    <legend>Credentials</legend>
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" name="username" id="username" required>
                    </div>

                     <div class="form-group">
                        <label for="contact">Contact Number</label>
                        <input type="tel" name="contact" id="contact" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" name="email" id="email" required>
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" name="password" id="password" required>
                    </div>

                    <div class="form-group">
                        <label for="confirm">Confirm Password</label>
                        <input type="password" name="confirm" id="confirm" required>
                    </div>
                </fieldset>

                 <div class="errormessages" id="errormessage"></div>
                <button type="submit" class="submit-button">Create Account</button>
            </div>
        </div>
    </form> 

    <script>
    document.getElementById("registrationForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Stop the form from submitting the default way

        // --- Helper function to get radio button value ---
        const getRadioValue = (name) => {
            const radio = document.querySelector(`input[name="${name}"]:checked`);
            return radio ? radio.value : "";
        };

        // --- Save all text and date values to localStorage ---
        localStorage.setItem("fname", document.getElementById("fname").value);
        localStorage.setItem("mname", document.getElementById("mname").value);
        localStorage.setItem("lname", document.getElementById("lname").value);
        localStorage.setItem("birthdate", document.getElementById("birthdate").value);
        localStorage.setItem("birthloc", document.getElementById("birthloc").value);
        localStorage.setItem("nationality", document.getElementById("nationality").value);
        localStorage.setItem("religion", document.getElementById("religion").value);
        localStorage.setItem("username", document.getElementById("username").value);
        localStorage.setItem("contact", document.getElementById("contact").value);
        localStorage.setItem("email", document.getElementById("email").value);

        // --- Save radio button values ---
        localStorage.setItem("gender", getRadioValue("gender"));
        localStorage.setItem("civilstat", getRadioValue("civilstat"));

        // --- Handle the photo upload ---
        const photoInput = document.getElementById("photo");
        const file = photoInput.files[0];

        // This function will redirect the user
        const redirectToOutput = () => {
            window.location.href = "output.html";
        };

        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                // When the file is read, save the Base64 string to localStorage
                localStorage.setItem("profilePic", e.target.result);
                redirectToOutput(); // Redirect after the image is saved
            };
            reader.readAsDataURL(file); // Start reading the file
        } else {
            // If no photo was selected, remove any old photo and redirect
            localStorage.removeItem("profilePic");
            redirectToOutput();
        }
    });
    </script>
</body>
</html>
